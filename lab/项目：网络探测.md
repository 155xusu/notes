## 多源异质协同探测策略
要求：针对不同目标、不同探测手段，协同探测策略不少于5种。具备内部网络节点自组织和协同分布式执行任务的能力，每个节点负载不超过原本负载的10%

## 1 任务安排

13号

上午：
完成已有的研究内容
完成任务目标的抽象

下午：
了解多段协同的负载均衡模型
思考通用化的负载均衡模型，使用最新技术，考虑当前研究的最优方案。

晚上：
对相关模型的具体了解（至少给出五个多端协同模型）

14号

决定采取的多端协同模型
结合任务目标进行论述

15号

探讨当前方法的合理性。

- 今天的任务应该首先自己臆想一套垃圾方案，然后去阅读别人的东西进行修改。本子上得东西，尽量多的用自己已经有的知识完善就好了。明天一天进行完善。开始吧，研究生生活。

## 2 《网络探测技术研究》已经有的研究内容

### 目标：
针对目标内网主动协同探测需求，建立内网自主探测模型；突破设备信息主动收集技术；突破内网限制区域突防技术；研制内网自主探测原型系统，实现目标内网自动化探测。

### 自主探测模型：
* 首先，根据自主探测模型，我们感知目标内网X态势。基于已有的经验我们可以分析出内网中的部分知识，如安防设备、主机的大致类型。
利用启发式探测方案生成技术自动生成探测方案。
在刚开始受控节点数量比较少的情况下，为保持探测隐蔽性，采用低频的探测手段，根据受控主机操作系统是Windows、Linux、IOS采用不同的收集手段；当受控设备数量到达阈值后，采用分布式策略加速探测。

* 其次，感知目标可攻破的形式。
根据网络关键信息基础设施及相关资产信息包括，如IP地址、资产名称、服务端口、协议名称、操作系统、设备类型、厂商属性、应用组件等，寻找目标设备的弱点，
选择武器库中的前锋武器（XSS、应用软件漏洞、操作系统漏洞、网络设备漏洞等）组成攻击方案。
针对目标内网X中的隔离区域，首先识别隔离器类型，根据不同隔离器类型，选择DMZ突防、网闸突防、物理隔离突防策略。

* 最后，根据感知的态势对方案进行评估，选择合适的攻击方案。经过混淆工具对攻击方案进行加密混淆，隐蔽传输至主控服务器ControlHost，再由主控服务器将攻击工具分发给不同受控节点，攻击同一网段的关键设备。在获取其他关键设备权限后，利用控守工具与主控服务器建立控制关系，迭代的向周围其他机器展开提权攻击，逐步完成对内网的探测活动。


### 多手段分布协同探测：

* 为提升内网探测自动化与自适应能力，研究内网自主探测体系结构与活动模型，根据系统科学及自组织对抗理论自主探测的组成活动划分为决策、组织、信息收集、区域突防、免杀逃逸、数据处理、可用评估共七项活动，并研究活动间的交互模型。自主探测模型是对执行体的运行机理建模，是设计自主探测原型系统的理论框架。

### 关键技术

1.	内网自主探测建模技术
为提升局域网探测的自动化与自适应能力，研究局域网自主探测体系结构与活动模型，根据系统科学及自组织对抗理论自主渗透的组成活动划分为决策和组织、数据处理、信息收集、区域突防、免杀逃逸和可用评估共七项活动，并研究活动间的交互模型。自主探测模型是对执行体的运行机理建模，是设计自主探测原型系统的理论框架。
2.	基于先验知识的启发式方案自生成技术
面对多个场景下的探测需求，研究基于先验知识的启发式方案自生成技术，利用先验知识，通过自主决策，结合主动探测与被动探测结合的方式完成探测。先通过已有知识库构建一颗包含探测目标及探测手段的决策树，表示初始方案，通过启发式方法对决策树进行搜索。探测过程中，根据实际结果不断更新决策树，不断迭代生成探测方案。

## 3 任务说明

### 关键词

* 协同、自组织、负载均衡、多端协同、群体协同

### 任务目标：网络探测。

具体任务：

* 主机探测（主机发现、端口探测、服务和版本探测、操作系统探测）
* 拓扑探测（SNMP、ARP、Traceroute、DNS）

### 任务要求：
* 多源异质、群体协同、负载均衡、自组织分布式

## 4 模型抽象

### 设备抽象：
* 主控服务器、受控设备、网络关键信息基础设施
* 节点属性信息包IP地址、资产名称、服务端口、协议名称、操作系统、设备类型、厂商属性、应用组件
* 主机、服务器、交换机等所有的网络设备抽象为网络节点。
* 网络节点，包含各种属性信息。（权限、操作系统、协议）
* 网络节点，包含实时变化的动态信息，例如当前节点的负载。可以通过属性计算函数进行更新（负载计算函数）
* 评估负载1.功能性测试。2. 抗压测试。
* 网络节点分为受控节点和非受控节点。受控节点表示能够接受控制节点执行控制任务，非空节点表示待渗透的节点。
* 网络节点之间存在各种依赖。使用二维矩阵描述网络节点之间的链接关系。数字表示依赖的类型。依赖的类型包括：直接连接、跨越交换机的链接、跨越路由器的链接、相互之间是否可信。
* 由节点组成的网络会随着被控节点的增多逐渐增加。节点之间的依赖关系也会动态更新。


### 策略抽象：
* 文章中提到的方案：选择前锋武器（XSS、应用软件漏洞、操作系统漏洞、网络设备漏洞等）组成攻击方案。实际上得方案有端口扫描和漏洞提权。
* 策略的指定属于外部输入。其他模块会确定攻击的目标，给出攻击的手段，制定攻击的策略。
* 每一个策略可以分为多个原子任务，原子任务之间存在依赖。可以构成一个有向无环图。
* 每一个策略涉及多个受控节点。需要多个受控节点合作，完成攻击策略，达成攻击目标。
* 每个策略执行完成后，需要对策略和子任务进行评估，包括性能评估、有效性评估。这样可以通过对比，得到方案的优劣。


### 任务抽象：
* 每一个策略可以分为多个子任务、子过程执行，每个可以单独执行的子过程称为原子任务。原子任务不需要再进行分割，可以由单一节点完成。（如果可以再分则不称为原子任务）
* 原子任务之间相互依赖。必须某些任务先完成，某些任务后完成。某些任务的输出是某些任务的输入。
* 原子任务之间可以没有相互依赖，比如端口扫描，可以分成十个任务，每个任务扫描各自范围的主机构成总的策略。
* 原子任务依赖特定的节点与节点依赖类型
* 原子任务具有初始的负载计算方法（负载初始化）
* 原子任务具有可迁移性。如果当前节点的负载过高或者不在满足其他动态属性要求时（通过动态属性计算获得），原子任务能够自动迁移到负载相对较低的网络节点。


## 4 数学模型

### 外部假设
* 首先，我不需要建立什么模型。在研究目标、研究内容、关键技术中都已经说明了内网自主探测模型。
* 涉及到探测策略、探测任务的具体内容不需要考虑
* 节点依赖与任务依赖应该由其他部分提供，对这一部分来说，是一种先验的内容。

### 目标
我需要做的是完成这个模型中的一个算法。即**实现原子任务在网络节点上得分配工作**。

### 约束
* 攻击目标、攻击策略都是由内网探测模型给出。属于外部输入。（通过其他部分给出）
* 节点依赖网络是外部输入。节点依赖网络包含各种类型的节点依赖。（通过其他部分给出）
* 节点网络是动态变化的。需要考虑执行任务的负载均衡。
* 攻击策略分解为原子任务，计算任务之间的依赖关系，构成任务依赖网络。

### 任务

原子任务---->受控节点。

* 满足原子任务之间的计算依赖。
* 满足受控节点之间的依赖类型。
* 满足原子任务对受控节点属性的要求。这种属性要求可能是动态变化的，如节点负载，这种动态变化的属性要给出动态属性计算函数。也可以是静态的，比如节点的权限、操作系统等。


