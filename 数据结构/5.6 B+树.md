# B+树

## 1 简介
### 概念

> 像是在建立额外的索引

* B+树是B树的扩展，允许有效的插入，删除和搜索操作。满足B树的所有特性


* 在B树中，键和记录都可以存储在内部节点和叶子节点中。 然而，在B+树中，记录(数据)只能存储在叶节点上，而内部节点只能存储键值。
* B+树的叶节点以单链表的形式链接在一起，以使搜索查询更有效。
* B+树用于存储无法存储在主存储器中的大量数据。 由于主存储器的大小总是有限的事实，B+树的内部节点(访问记录的键)存储在主存储器中，而叶节点存储在辅助存储器中。
* B+树的内部节点通常称为索引节点。

### 优点

* 可以在相同数量的磁盘访问中获取记录。
* 树高度保持平衡，与B树相比较少。
* 可以顺序访问存储在B+树中的数据，也可以直接访问。
* 键用于索引。更快的搜索查询，因为数据仅存储在叶节点上。


## 2 操作
### 搜索
### 插入
* 第1步 ：将新节点作为叶节点插入。
* 第2步 ：如果叶子没有所需空间，则拆分节点并将中间节点复制到下一个索引节点。
* 第3步 ：如果索引节点没有所需空间，则拆分节点并将中间元素复制到下一个索引节点

> 实例

* 将值195插入到下图所示的5阶B+树中。
![](2021-03-12-23-58-07.png)
* 在190之后，将在右子树120中插入195。将其插入所需位置。
![](2021-03-12-23-58-14.png)
* 该节点包含大于最大的元素数量，即4，因此将其拆分并将中间节点放置到父节点。
![](2021-03-12-23-58-20.png)
* 现在，索引节点包含6个子节点和5个键，违反B+树属性，因此需要将其拆分，如下所示。将108提为根节点。60,78左子节点，120,190右子节点。
![](2021-03-12-23-58-29.png)

### 删除

* 第1步：从叶子中删除键和数据。
* 第2步：如果叶节点包含少于最小数量的元素，则将节点与其兄弟节点合并，并删除它们之间的键。
* 第3步：如果索引节点包含少于最小数量的元素，则将节点与兄弟节点合并，并在它们之间向下移动键。

> 示例
* 从下图所示的B+树中删除键为200。
![](2021-03-13-00-03-01.png)
* 在195之后的190的右子树中存在200，删除它。
![](2021-03-13-00-03-07.png)
* 使用195,190,154和129合并两个节点。
![](2021-03-13-00-03-13.png)
* 现在，元素120是节点中存在的违反B+树属性的单个元素。 因此，需要使用60,78,108和120来合并它。现在，B+树的高度将减1。
![](2021-03-13-00-03-30.png)
